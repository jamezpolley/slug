{% extends "base.html" %}
{% comment %}
-*- coding: utf-8 -*-
vim: set ts=2 sw=2 et sts=2 ai:
{% endcomment %}
{% block head %}
    <link rel="StyleSheet" href="/css/events.css" type="text/css" media="screen">
{% endblock %}
{% block body %}
    <h1>SLUG Events</h1>
    <div id=content class=box>

  {% if current_events %}
    <h2>Events Ending Today</h2>
    <table>
      <tr><th>Start Date</th><th>End Date</th><th>Event Name</th><th>Event Text</th><th>Response</th><th>iCal</th>
        {% if appengine_admin %}
          <th>Actions</th>
        {% endif %}
      </tr>
      {% for event in current_events %}
        <tr class="{% cycle 'evenRow' 'oddRow' %}" onclick="location.href='{{ event.get_url }}'">
          <td>{{ event.start }}</td>
          <td>{{ event.end }}</td>
          <td><a href="{{ event.get_url }}">{{ event.name }}</a></td>
          <td><div style="height: 250px; overflow: scroll;">{{ event.html|safe }}</div></td>
          {% if openid_user %}
            <td><iframe src="{{ event.get_url }}/response/show"/></iframe></td>
          {% else %}
            <td><a href="{{ openid_login_url }}">Login to RSVP!</a></td>
          {% endif %}
          <td>
            <div class=event-icons> <div class="ical-link"><a href="{{ event.get_url }}.ics" title="Add this event to your iCalendar"><img src="/images/ical16x16.gif" alt="Add event to iCalendar"></a></div> </div>
          </td>
          {% if appengine_admin %}
            <td>
              <a href="{{ event.get_url }}/edit">Edit</a>
              <div id=announceform>
                <form name="announce" action="{{ event.get_url }}/announce" method="post">
                  <input type="submit" value="Send announcement email">
                </form>
              </div>
            </td>
          {% endif %}
        </tr>
      {% endfor %}
    </table>
  {% endif %}

  <h2>Future Events</h2>
    <table>
      <thead>
      <tr><th>Start Date</th><th>End Date</th><th>Event Name</th><th>Event Text</th><th>Response</th><th>iCal</th>
        {% if appengine_admin %}
          <th>Actions</th>
        {% endif %}
      </tr>
      </thead>
      <tbody>
        {% for event in future_events %}
          <tr class="{% cycle 'evenRow' 'oddRow' %}" onclick="location.href='{{ event.get_url }}'">
            <td>{{ event.start }}</td>
            <td>{{ event.end }}</td>
            <td><a href="{{ event.get_url }}">{{ event.name }}</a></td>
            <td><div style="height: 250px; overflow: scroll;">{{ event.html|safe }}</div></td>
            {% if openid_user %}
              <td><iframe src="{{ event.get_url }}/response/show"></iframe></td>
            {% else %}
              <td><a href="{{ openid_login_url }}">Login to RSVP!</a></td>
            {% endif %}
            <td>
              <div class=event-icons> <div class="ical-link"><a href="{{ event.get_url }}.ics" title="Add this event to your iCalendar"><img src="/images/ical16x16.gif" alt="Add event to iCalendar"></a></div> </div>
            </td>
            {% if appengine_admin %}
              <td>
                <a href="{{ event.get_url }}/edit">Edit</a>
                <div id=announceform>
                  <form name="announce" action="{{ event.get_url }}/announce" method="post">
                    <input type="submit" value="Send announcement email">
                  </form>
                </div>
              </td>
            {% endif %}
          </tr>
        {% endfor %}
      </tbody>
    </table>

    </div> <!-- content -->
{% endblock %}
