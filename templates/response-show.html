{% comment %}
-*- coding: utf-8 -*-
vim: set ts=2 sw=2 et sts=2 ai:
{% endcomment %}

<table class="response">
  <tr>
    <td colspan=2>
      <!-- People Attending carousel -->
      <div>
        <!-- {{ event.key.id }} -->
      {% for other_response in event.responses %}
        <!-- {{ other_response.key.id }} -->
        {% if other_response.attending %}
          {% if other_response.guest %}
          <img src="{{ other_response.guest_email|gravatar:32 }}"
              title="{{ other_response.guest_name }}'s Gravatar ({{ other_response.created_by.nickname }}'s guest)"
              class="gravatar">
          {% else %}
          <img src="{{ other_response.created_by.email|gravatar:32 }}"
              title="{{ other_response.created_by.nickname }}'s Gravatar"
              class="gravatar">
          {% endif %}
       {% else %}
        <!-- Not attending! -->
       {% endif %}
      {% endfor %}
      </div>
    </td>
  </tr>
{% if openid_user %}
  <!-- Is logged in. -->
{% ifequal response None %}
  <!-- Has not responded yet. -->
  <tr>
    <td colspan=2>Why don't you attend too?</td>
  </tr><tr>
    <td>
      I'll attend, and I'll be bringing 
      <input class="response-friends" type=text name=friends value=0> friends!
    </td><td>
      <img class="response-image" src="/images/tick-small.png">
    </td>
  </tr><tr>
    <td>
      Sorry, I can't attend.
    </td><td>
      <img class="response-image" src="/images/cross-small.png">
    </td>
  </tr>  
{% else %}
  <!-- Has responded. -->
  <tr>
    <td>
    {% if response.attending %}
      Yes, I'm attending!
    {% else %}
      I'm not attending!
    {% endif %}
    </td><td>
    {% if response.attending %}
      {% if guests %}
        <img class="response-image" src="/images/multi-small.png">
      {% else %}
        <img class="response-image" src="/images/tick-small.png">
      {% endif %}
    {% else %}
        <img class="response-image" src="/images/cross-small.png">
    {% endif %}
    </td><td rowspan=2>
      <!-- Share widget goes here! -->
    </td>
  </tr><tr>
    <td colspan=2>
      <!-- Your gravatar -->
      <img src="{{ response.created_by.email|gravatar:32 }}"
          alt="{{ response.created_by.nickname }}'s Gravatar"
          class="gravatar">
      <!-- Your friends gravatars -->
      {% for guest in guests %}
      <img src="{{ guest.guest_email|gravatar:32 }}"
          alt="{{ guest.guest_name }}'s Gravatar"
          class="gravatar">
      {% endfor %}
      <!-- Change response widget goes here -->
    </td>
  </tr>
{% endifequal %}
{% else %}
  <!-- Is not logged in. -->
  <tr>
    <td>
      <a class="openid_login" href="{{ openid_login_url }}">Login to RSVP!</a>
    </td>
  </tr>
{% endif %}
</table>
